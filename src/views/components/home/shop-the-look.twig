{# Shop the Look — Interactive Hotspot Image #}
{% set _pt = component.section_padding_top is defined and component.section_padding_top != '' ? component.section_padding_top : null %}
{% set _pb = component.section_padding_bottom is defined and component.section_padding_bottom != '' ? component.section_padding_bottom : null %}
{% set _spacing_style = (_pt is not null or _pb is not null) ? 'style="' ~ (_pt is not null ? 'padding-top:' ~ _pt ~ 'px;' : '') ~ (_pb is not null ? 'padding-bottom:' ~ _pb ~ 'px;' : '') ~ '"' : '' %}
<section class="najd-block najd-block--shop-look {{ component.full_width is defined and component.full_width ? '' : 'container' }}" {{ _spacing_style }}>
    {% if component.title %}
        <div class="najd-block__header text-center mb-8">
            <h2 class="najd-block__title">{{ component.title }}</h2>
        </div>
    {% endif %}

    <div class="najd-shop-look" id="najd-shop-look-{{ position }}">
        <img src="{{ component.image }}" alt="{{ component.title|default('Shop the Look') }}" loading="lazy" class="najd-shop-look__image">

        {% for hotspot in component.hotspots %}
            <button class="najd-shop-look__hotspot"
                    style="left: {{ hotspot.x_position|default(50) }}%; top: {{ hotspot.y_position|default(50) }}%"
                    data-hotspot="{{ loop.index0 }}"
                    aria-label="{{ hotspot.product_title }}">
                <span class="najd-shop-look__pulse"></span>
            </button>
            <div class="najd-shop-look__popup" data-popup="{{ loop.index0 }}"
                 style="left: {{ hotspot.x_position|default(50) }}%; top: {{ hotspot.y_position|default(50) }}%">
                {% if hotspot.product_image %}
                    <img src="{{ hotspot.product_image }}" alt="{{ hotspot.product_title }}" class="najd-shop-look__popup-img">
                {% endif %}
                <div class="najd-shop-look__popup-info">
                    <h4>{{ hotspot.product_title }}</h4>
                    {% if hotspot.product_price %}
                        <span class="najd-shop-look__popup-price">{{ hotspot.product_price }}</span>
                    {% endif %}
                    {% if hotspot.product_url %}
                        <a href="{{ hotspot.product_url }}" class="najd-btn najd-btn--sm najd-btn--primary mt-2">تسوق الآن</a>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
</section>
